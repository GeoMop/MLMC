
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>src.mlmc.tool package &#8212; MLMC daf documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="src.mlmc.sim package" href="src.mlmc.sim.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="src-mlmc-tool-package">
<h1>src.mlmc.tool package<a class="headerlink" href="#src-mlmc-tool-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="src-mlmc-tool-context-statprof-module">
<h2>src.mlmc.tool.context_statprof module<a class="headerlink" href="#src-mlmc-tool-context-statprof-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-src.mlmc.tool.distribution">
<span id="src-mlmc-tool-distribution-module"></span><h2>src.mlmc.tool.distribution module<a class="headerlink" href="#module-src.mlmc.tool.distribution" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="src.mlmc.tool.distribution.Distribution">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">src.mlmc.tool.distribution.</span></code><code class="sig-name descname"><span class="pre">Distribution</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">moments_obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">moment_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">domain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_decay</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(True,</span> <span class="pre">True)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">monitor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/distribution.html#Distribution"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.distribution.Distribution" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Calculation of the distribution</p>
<dl class="py method">
<dt id="src.mlmc.tool.distribution.Distribution.cdf">
<code class="sig-name descname"><span class="pre">cdf</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">values</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/distribution.html#Distribution.cdf"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.distribution.Distribution.cdf" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.distribution.Distribution.density">
<code class="sig-name descname"><span class="pre">density</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">moments_fn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/distribution.html#Distribution.density"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.distribution.Distribution.density" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>value</strong> – float or np.array</p></li>
<li><p><strong>moments_fn</strong> – counting moments function</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>density for passed value</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.distribution.Distribution.end_point_derivatives">
<code class="sig-name descname"><span class="pre">end_point_derivatives</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/distribution.html#Distribution.end_point_derivatives"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.distribution.Distribution.end_point_derivatives" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute approximation of moment derivatives at endpoints of the domain.
:return: array (2, n_moments)</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.distribution.Distribution.estimate_density">
<code class="sig-name descname"><span class="pre">estimate_density</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/distribution.html#Distribution.estimate_density"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.distribution.Distribution.estimate_density" title="Permalink to this definition">¶</a></dt>
<dd><p>Run nonlinear iterative solver to estimate density, use previous solution as initial guess.
Faster, but worse stability.
:return: None</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.distribution.Distribution.estimate_density_minimize">
<code class="sig-name descname"><span class="pre">estimate_density_minimize</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-05</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reg_param</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.01</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/distribution.html#Distribution.estimate_density_minimize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.distribution.Distribution.estimate_density_minimize" title="Permalink to this definition">¶</a></dt>
<dd><p>Optimize density estimation
:param tol: Tolerance for the nonlinear system residual, after division by std errors for
individual moment means, i.e.
res = || (F_i - mu_i) / sigma_i ||_2
:return: None</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.distribution.Distribution.eval_moments">
<code class="sig-name descname"><span class="pre">eval_moments</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/distribution.html#Distribution.eval_moments"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.distribution.Distribution.eval_moments" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.distribution.Distribution.extend_size">
<code class="sig-name descname"><span class="pre">extend_size</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">new_size</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/distribution.html#Distribution.extend_size"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.distribution.Distribution.extend_size" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt id="src.mlmc.tool.distribution.KL_divergence">
<code class="sig-prename descclassname"><span class="pre">src.mlmc.tool.distribution.</span></code><code class="sig-name descname"><span class="pre">KL_divergence</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prior_density</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">posterior_density</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/distribution.html#KL_divergence"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.distribution.KL_divergence" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute D_KL(P | Q) = int_R P(x) log( P(X)/Q(x)) dx
:param prior_density: P
:param posterior_density: Q
:return: KL divergence value</p>
</dd></dl>

<dl class="py function">
<dt id="src.mlmc.tool.distribution.L2_distance">
<code class="sig-prename descclassname"><span class="pre">src.mlmc.tool.distribution.</span></code><code class="sig-name descname"><span class="pre">L2_distance</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prior_density</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">posterior_density</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/distribution.html#L2_distance"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.distribution.L2_distance" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="src.mlmc.tool.distribution.compute_exact_moments">
<code class="sig-prename descclassname"><span class="pre">src.mlmc.tool.distribution.</span></code><code class="sig-name descname"><span class="pre">compute_exact_moments</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">moments_fn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">density</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0001</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/distribution.html#compute_exact_moments"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.distribution.compute_exact_moments" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute approximation of moments using exact density.
:param moments_fn: Moments function.
:param n_moments: Number of mements to compute.
:param density: Density function (must accept np vectors).
:param a, b: Integral bounds, approximate integration over R.
:param tol: Tolerance of integration.
:return: np.array, moment values</p>
</dd></dl>

</div>
<div class="section" id="module-src.mlmc.tool.flow_mc">
<span id="src-mlmc-tool-flow-mc-module"></span><h2>src.mlmc.tool.flow_mc module<a class="headerlink" href="#module-src.mlmc.tool.flow_mc" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="src.mlmc.tool.flow_mc.FlowSim">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">src.mlmc.tool.flow_mc.</span></code><code class="sig-name descname"><span class="pre">FlowSim</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clean</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/flow_mc.html#FlowSim"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.flow_mc.FlowSim" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">mlmc.sim.simulation.Simulation</span></code></p>
<dl class="py attribute">
<dt id="src.mlmc.tool.flow_mc.FlowSim.FIELDS_FILE">
<code class="sig-name descname"><span class="pre">FIELDS_FILE</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'fields_sample.msh'</span></em><a class="headerlink" href="#src.mlmc.tool.flow_mc.FlowSim.FIELDS_FILE" title="Permalink to this definition">¶</a></dt>
<dd><p>Gather data for single flow call (coarse/fine)</p>
<p>Usage:
mlmc.sampler.Sampler uses instance of FlowSim, it calls once level_instance() for each level step (The level_instance() method</p>
<blockquote>
<div><p>is called as many times as the number of levels), it takes place in main process</p>
</div></blockquote>
<p>mlmc.tool.pbs_job.PbsJob uses static methods in FlowSim, it calls calculate(). That’s where the calculation actually runs,
it takes place in PBS process</p>
<blockquote>
<div><p>It also extracts results and passes them back to PbsJob, which handles the rest</p>
</div></blockquote>
</dd></dl>

<dl class="py attribute">
<dt id="src.mlmc.tool.flow_mc.FlowSim.GEO_FILE">
<code class="sig-name descname"><span class="pre">GEO_FILE</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'mesh.geo'</span></em><a class="headerlink" href="#src.mlmc.tool.flow_mc.FlowSim.GEO_FILE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="src.mlmc.tool.flow_mc.FlowSim.MESH_FILE">
<code class="sig-name descname"><span class="pre">MESH_FILE</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'mesh.msh'</span></em><a class="headerlink" href="#src.mlmc.tool.flow_mc.FlowSim.MESH_FILE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="src.mlmc.tool.flow_mc.FlowSim.MESH_FILE_VAR">
<code class="sig-name descname"><span class="pre">MESH_FILE_VAR</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'mesh_file'</span></em><a class="headerlink" href="#src.mlmc.tool.flow_mc.FlowSim.MESH_FILE_VAR" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="src.mlmc.tool.flow_mc.FlowSim.TIMESTEP_H1_VAR">
<code class="sig-name descname"><span class="pre">TIMESTEP_H1_VAR</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'timestep_h1'</span></em><a class="headerlink" href="#src.mlmc.tool.flow_mc.FlowSim.TIMESTEP_H1_VAR" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="src.mlmc.tool.flow_mc.FlowSim.TIMESTEP_H2_VAR">
<code class="sig-name descname"><span class="pre">TIMESTEP_H2_VAR</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'timestep_h2'</span></em><a class="headerlink" href="#src.mlmc.tool.flow_mc.FlowSim.TIMESTEP_H2_VAR" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="src.mlmc.tool.flow_mc.FlowSim.YAML_FILE">
<code class="sig-name descname"><span class="pre">YAML_FILE</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'flow_input.yaml'</span></em><a class="headerlink" href="#src.mlmc.tool.flow_mc.FlowSim.YAML_FILE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="src.mlmc.tool.flow_mc.FlowSim.YAML_TEMPLATE">
<code class="sig-name descname"><span class="pre">YAML_TEMPLATE</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'flow_input.yaml.tmpl'</span></em><a class="headerlink" href="#src.mlmc.tool.flow_mc.FlowSim.YAML_TEMPLATE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.flow_mc.FlowSim.calculate">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">calculate</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/flow_mc.html#FlowSim.calculate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.flow_mc.FlowSim.calculate" title="Permalink to this definition">¶</a></dt>
<dd><p>Method that actually run the calculation, it’s called from mlmc.tool.pbs_job.PbsJob.calculate_samples()
Calculate fine and coarse sample and also extract their results
:param config: dictionary containing simulation configuration, LevelSimulation.config_dict (set in level_instance)
:param seed: random seed, int
:return: List[fine result, coarse result], both flatten arrays (see mlmc.sim.synth_simulation.calculate())</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.flow_mc.FlowSim.extract_mesh">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">extract_mesh</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mesh_file</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/flow_mc.html#FlowSim.extract_mesh"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.flow_mc.FlowSim.extract_mesh" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract mesh from file
:param mesh_file: Mesh file path
:return: Dict</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.flow_mc.FlowSim.generate_random_sample">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">generate_random_sample</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fields</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coarse_step</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_fine_elements</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/flow_mc.html#FlowSim.generate_random_sample"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.flow_mc.FlowSim.generate_random_sample" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate random field, both fine and coarse part.
Store them separeted.
:return: Dict, Dict</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.flow_mc.FlowSim.level_instance">
<code class="sig-name descname"><span class="pre">level_instance</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fine_level_params</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coarse_level_params</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">mlmc.level_simulation.LevelSimulation</span><a class="reference internal" href="_modules/src/mlmc/tool/flow_mc.html#FlowSim.level_instance"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.flow_mc.FlowSim.level_instance" title="Permalink to this definition">¶</a></dt>
<dd><p>Called from mlmc.Sampler, it creates single instance of LevelSimulation (mlmc.)
:param fine_level_params: in this version, it is just fine simulation step
:param coarse_level_params: in this version, it is just coarse simulation step
:return: mlmc.LevelSimulation object, this object is serialized in SamplingPoolPbs and deserialized in PbsJob,</p>
<blockquote>
<div><p>so it allows pass simulation data from main process to PBS process</p>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.flow_mc.FlowSim.make_fields">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">make_fields</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fields</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fine_mesh_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coarse_mesh_data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/flow_mc.html#FlowSim.make_fields"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.flow_mc.FlowSim.make_fields" title="Permalink to this definition">¶</a></dt>
<dd><p>Create random fields that are used by both coarse and fine simulation
:param fields: correlated_field.Fields instance
:param fine_mesh_data: Dict contains data extracted from fine mesh file (points, point_region_ids, region_map)
:param coarse_mesh_data: Dict contains data extracted from coarse mesh file (points, point_region_ids, region_map)
:return: correlated_field.Fields</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.flow_mc.FlowSim.result_format">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">result_format</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">mlmc.quantity.quantity_spec.QuantitySpec</span><span class="p"><span class="pre">]</span></span><a class="reference internal" href="_modules/src/mlmc/tool/flow_mc.html#FlowSim.result_format"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.flow_mc.FlowSim.result_format" title="Permalink to this definition">¶</a></dt>
<dd><p>Define simulation result format
:return: List[QuantitySpec, …]</p>
</dd></dl>

<dl class="py attribute">
<dt id="src.mlmc.tool.flow_mc.FlowSim.total_sim_id">
<code class="sig-name descname"><span class="pre">total_sim_id</span></code><em class="property"> <span class="pre">=</span> <span class="pre">0</span></em><a class="headerlink" href="#src.mlmc.tool.flow_mc.FlowSim.total_sim_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt id="src.mlmc.tool.flow_mc.create_corr_field">
<code class="sig-prename descclassname"><span class="pre">src.mlmc.tool.flow_mc.</span></code><code class="sig-name descname"><span class="pre">create_corr_field</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'gauss'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">corr_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.125</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode_no</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/flow_mc.html#create_corr_field"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.flow_mc.create_corr_field" title="Permalink to this definition">¶</a></dt>
<dd><p>Create random fields
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="src.mlmc.tool.flow_mc.force_mkdir">
<code class="sig-prename descclassname"><span class="pre">src.mlmc.tool.flow_mc.</span></code><code class="sig-name descname"><span class="pre">force_mkdir</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/flow_mc.html#force_mkdir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.flow_mc.force_mkdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Make directory ‘path’ with all parents,
remove the leaf dir recursively if it already exists.
:param path: path to directory
:param force: if dir already exists then remove it and create new one
:return: None</p>
</dd></dl>

<dl class="py function">
<dt id="src.mlmc.tool.flow_mc.substitute_placeholders">
<code class="sig-prename descclassname"><span class="pre">src.mlmc.tool.flow_mc.</span></code><code class="sig-name descname"><span class="pre">substitute_placeholders</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_in</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_out</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/flow_mc.html#substitute_placeholders"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.flow_mc.substitute_placeholders" title="Permalink to this definition">¶</a></dt>
<dd><p>Substitute for placeholders of format ‘&lt;name&gt;’ from the dict ‘params’.
:param file_in: Template file.
:param file_out: Values substituted.
:param params: { ‘name’: value, …}</p>
</dd></dl>

</div>
<div class="section" id="module-src.mlmc.tool.gmsh_io">
<span id="src-mlmc-tool-gmsh-io-module"></span><h2>src.mlmc.tool.gmsh_io module<a class="headerlink" href="#module-src.mlmc.tool.gmsh_io" title="Permalink to this headline">¶</a></h2>
<p>Module containing an expanded python gmsh class</p>
<dl class="py class">
<dt id="src.mlmc.tool.gmsh_io.GmshIO">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">src.mlmc.tool.gmsh_io.</span></code><code class="sig-name descname"><span class="pre">GmshIO</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/gmsh_io.html#GmshIO"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.gmsh_io.GmshIO" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This is a class for storing nodes and elements. Based on Gmsh.py</p>
<p>Members:
nodes – A dict of the form { nodeID: [ xcoord, ycoord, zcoord] }
elements – A dict of the form { elemID: (type, [tags], [nodeIDs]) }
physical – A dict of the form { name: (id, dim) }</p>
<p>Methods:
read([file]) – Parse a Gmsh version 1.0 or 2.0 mesh file
write([file]) – Output a Gmsh version 2.0 mesh file</p>
<dl class="py method">
<dt id="src.mlmc.tool.gmsh_io.GmshIO.read">
<code class="sig-name descname"><span class="pre">read</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mshfile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/gmsh_io.html#GmshIO.read"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.gmsh_io.GmshIO.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a Gmsh .msh file.</p>
<p>Reads Gmsh format 1.0 and 2.0 mesh files, storing the nodes and
elements in the appropriate dicts.</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.gmsh_io.GmshIO.read_element_data">
<code class="sig-name descname"><span class="pre">read_element_data</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/gmsh_io.html#GmshIO.read_element_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.gmsh_io.GmshIO.read_element_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Write given element data to the MSH file. Write only a single ‘$ElementData’ section.
:param f: Output file stream.
:param ele_ids: Iterable giving element ids of N value rows given in ‘values’
:param name: Field name.
:param values: np.array (N, L); N number of elements, L values per element (components)
:return:</p>
<p>TODO: Generalize to time dependent fields.</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.gmsh_io.GmshIO.read_element_data_head">
<code class="sig-name descname"><span class="pre">read_element_data_head</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mshfile</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/gmsh_io.html#GmshIO.read_element_data_head"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.gmsh_io.GmshIO.read_element_data_head" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.gmsh_io.GmshIO.reset">
<code class="sig-name descname"><span class="pre">reset</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/gmsh_io.html#GmshIO.reset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.gmsh_io.GmshIO.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Reinitialise Gmsh data structure</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.gmsh_io.GmshIO.write_ascii">
<code class="sig-name descname"><span class="pre">write_ascii</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mshfile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/gmsh_io.html#GmshIO.write_ascii"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.gmsh_io.GmshIO.write_ascii" title="Permalink to this definition">¶</a></dt>
<dd><p>Dump the mesh out to a Gmsh 2.0 msh file.</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.gmsh_io.GmshIO.write_binary">
<code class="sig-name descname"><span class="pre">write_binary</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/gmsh_io.html#GmshIO.write_binary"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.gmsh_io.GmshIO.write_binary" title="Permalink to this definition">¶</a></dt>
<dd><p>Dump the mesh out to a Gmsh 2.0 msh file.</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.gmsh_io.GmshIO.write_element_data">
<code class="sig-name descname"><span class="pre">write_element_data</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ele_ids</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">values</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/gmsh_io.html#GmshIO.write_element_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.gmsh_io.GmshIO.write_element_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Write given element data to the MSH file. Write only a single ‘$ElementData’ section.
:param f: Output file stream.
:param ele_ids: Iterable giving element ids of N value rows given in ‘values’
:param name: Field name.
:param values: np.array (N, L); N number of elements, L values per element (components)
:return:</p>
<p>TODO: Generalize to time dependent fields.</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.gmsh_io.GmshIO.write_fields">
<code class="sig-name descname"><span class="pre">write_fields</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msh_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ele_ids</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fields</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/gmsh_io.html#GmshIO.write_fields"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.gmsh_io.GmshIO.write_fields" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates input data msh file for Flow model.
:param msh_file: Target file (or None for current mesh file)
:param ele_ids: Element IDs in computational mesh corrsponding to order of
field values in element’s barycenter.
:param fields: {‘field_name’ : values_array, ..}</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-src.mlmc.tool.hdf5">
<span id="src-mlmc-tool-hdf5-module"></span><h2>src.mlmc.tool.hdf5 module<a class="headerlink" href="#module-src.mlmc.tool.hdf5" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="src.mlmc.tool.hdf5.HDF5">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">src.mlmc.tool.hdf5.</span></code><code class="sig-name descname"><span class="pre">HDF5</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">load_from_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/hdf5.html#HDF5"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.hdf5.HDF5" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>HDF5 file is organized into groups (h5py.Group objects)
which is somewhat like dictionaries in python terminology - ‘keys’ are names of group members
‘values’ are members (groups (h5py.Group objects) and datasets (h5py.Dataset objects - similar to NumPy arrays)).
Each group and dataset (including root group) can store metadata in ‘attributes’ (h5py.AttributeManager objects)
HDF5 files (h5py.File) work generally like standard Python file objects</p>
<dl>
<dt>Our HDF5 file strucutre:</dt><dd><p>Main Group:
Keys:</p>
<blockquote>
<div><dl class="simple">
<dt>Levels: h5py.Group</dt><dd><dl class="simple">
<dt>Attributes:</dt><dd><p>level_parameters: [[a], [b], [], …]</p>
</dd>
<dt>Keys:</dt><dd><dl class="simple">
<dt>&lt;N&gt;: h5py.Group (N - level id, start with 0)</dt><dd><dl class="simple">
<dt>Attributes:</dt><dd><p>id: str
n_ops_estimate: float</p>
</dd>
<dt>Keys:</dt><dd><dl class="simple">
<dt>scheduled: h5py.Dataset</dt><dd><p>dtype: S100
shape: (N,), N - number of scheduled values
maxshape: (None,)
chunks: True</p>
</dd>
<dt>collected_values: h5py.Dataset</dt><dd><p>dtype: numpy.float64
shape: (Nc, 2, M) dtype structure is defined in simulation class
maxshape: (None, 2, None)
chunks: True</p>
</dd>
<dt>collected_ids: h5py.Dataset</dt><dd><p>dtype: numpy.int16  index into scheduled
shape: (Nc, 1)
maxshape: (None, 1)
chunks: True</p>
</dd>
<dt>failed: h5py.Dataset</dt><dd><p>dtype: (‘S100’, ‘S1000’)
shape: (Nf, 1)
mashape: (None, 1)
chunks: True</p>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</div></blockquote>
</dd>
</dl>
<dl class="py method">
<dt id="src.mlmc.tool.hdf5.HDF5.add_level_group">
<code class="sig-name descname"><span class="pre">add_level_group</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">level_id</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/hdf5.html#HDF5.add_level_group"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.hdf5.HDF5.add_level_group" title="Permalink to this definition">¶</a></dt>
<dd><p>Create group for particular level, parent group is ‘Levels’
:param level_id: str, mlmc.Level identifier
:return: LevelGroup instance, it is container for h5py.Group instance</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.hdf5.HDF5.clear_groups">
<code class="sig-name descname"><span class="pre">clear_groups</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/hdf5.html#HDF5.clear_groups"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.hdf5.HDF5.clear_groups" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove HDF5 group Levels, it allows run same mlmc object more times
:return: None</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.hdf5.HDF5.create_file_structure">
<code class="sig-name descname"><span class="pre">create_file_structure</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">level_parameters</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/hdf5.html#HDF5.create_file_structure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.hdf5.HDF5.create_file_structure" title="Permalink to this definition">¶</a></dt>
<dd><p>Create hdf structure
:param level_parameters: List[float]
:return: None</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.hdf5.HDF5.init_header">
<code class="sig-name descname"><span class="pre">init_header</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">level_parameters</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/hdf5.html#HDF5.init_header"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.hdf5.HDF5.init_header" title="Permalink to this definition">¶</a></dt>
<dd><p>Add h5py.File metadata to .attrs (attrs objects are of class h5py.AttributeManager)
:param level_parameters: MLMC level range of steps
:return: None</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.hdf5.HDF5.load_from_file">
<code class="sig-name descname"><span class="pre">load_from_file</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/hdf5.html#HDF5.load_from_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.hdf5.HDF5.load_from_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Load root group attributes from existing HDF5 file
:return: None</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.hdf5.HDF5.load_level_parameters">
<code class="sig-name descname"><span class="pre">load_level_parameters</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/hdf5.html#HDF5.load_level_parameters"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.hdf5.HDF5.load_level_parameters" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.hdf5.HDF5.load_result_format">
<code class="sig-name descname"><span class="pre">load_result_format</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/hdf5.html#HDF5.load_result_format"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.hdf5.HDF5.load_result_format" title="Permalink to this definition">¶</a></dt>
<dd><p>Load format result, it just read dataset
:return:</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.hdf5.HDF5.result_format_dset_name">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">result_format_dset_name</span></code><a class="headerlink" href="#src.mlmc.tool.hdf5.HDF5.result_format_dset_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Result format dataset name
:return: str</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.hdf5.HDF5.save_result_format">
<code class="sig-name descname"><span class="pre">save_result_format</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">result_format</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">res_dtype</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/hdf5.html#HDF5.save_result_format"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.hdf5.HDF5.save_result_format" title="Permalink to this definition">¶</a></dt>
<dd><p>Save result format to dataset
:param result_format: List[QuantitySpec]
:param res_dtype: result numpy dtype
:return: None</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="src.mlmc.tool.hdf5.LevelGroup">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">src.mlmc.tool.hdf5.</span></code><code class="sig-name descname"><span class="pre">LevelGroup</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hdf_group_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">level_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">loaded_from_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/hdf5.html#LevelGroup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.hdf5.LevelGroup" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py attribute">
<dt id="src.mlmc.tool.hdf5.LevelGroup.COLLECTED_ATTRS">
<code class="sig-name descname"><span class="pre">COLLECTED_ATTRS</span></code><em class="property"> <span class="pre">=</span> <span class="pre">{'sample_id':</span> <span class="pre">{'default_shape':</span> <span class="pre">(0,),</span> <span class="pre">'dtype':</span> <span class="pre">{'formats':</span> <span class="pre">['S100'],</span> <span class="pre">'names':</span> <span class="pre">['sample_id']},</span> <span class="pre">'maxshape':</span> <span class="pre">(None,),</span> <span class="pre">'name':</span> <span class="pre">'collected_ids'}}</span></em><a class="headerlink" href="#src.mlmc.tool.hdf5.LevelGroup.COLLECTED_ATTRS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="src.mlmc.tool.hdf5.LevelGroup.FAILED_DTYPE">
<code class="sig-name descname"><span class="pre">FAILED_DTYPE</span></code><em class="property"> <span class="pre">=</span> <span class="pre">{'formats':</span> <span class="pre">('S100',</span> <span class="pre">'S1000'),</span> <span class="pre">'names':</span> <span class="pre">('sample_id',</span> <span class="pre">'message')}</span></em><a class="headerlink" href="#src.mlmc.tool.hdf5.LevelGroup.FAILED_DTYPE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="src.mlmc.tool.hdf5.LevelGroup.SCHEDULED_DTYPE">
<code class="sig-name descname"><span class="pre">SCHEDULED_DTYPE</span></code><em class="property"> <span class="pre">=</span> <span class="pre">{'formats':</span> <span class="pre">['S100'],</span> <span class="pre">'names':</span> <span class="pre">['sample_id']}</span></em><a class="headerlink" href="#src.mlmc.tool.hdf5.LevelGroup.SCHEDULED_DTYPE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.hdf5.LevelGroup.append_failed">
<code class="sig-name descname"><span class="pre">append_failed</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">failed_samples</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/hdf5.html#LevelGroup.append_failed"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.hdf5.LevelGroup.append_failed" title="Permalink to this definition">¶</a></dt>
<dd><p>Save level failed sample ids (not append samples)
:param failed_samples: set; Level sample ids
:return: None</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.hdf5.LevelGroup.append_scheduled">
<code class="sig-name descname"><span class="pre">append_scheduled</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scheduled_samples</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/hdf5.html#LevelGroup.append_scheduled"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.hdf5.LevelGroup.append_scheduled" title="Permalink to this definition">¶</a></dt>
<dd><p>Save scheduled samples to dataset (h5py.Dataset)
:param scheduled_samples: list of sample ids
:return: None</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.hdf5.LevelGroup.append_successful">
<code class="sig-name descname"><span class="pre">append_successful</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">samples</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.array</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/hdf5.html#LevelGroup.append_successful"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.hdf5.LevelGroup.append_successful" title="Permalink to this definition">¶</a></dt>
<dd><p>Save level samples to datasets (h5py.Dataset), save ids of collected samples and their results
:param samples: np.ndarray
:return: None</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.hdf5.LevelGroup.chunks">
<code class="sig-name descname"><span class="pre">chunks</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n_samples</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/hdf5.html#LevelGroup.chunks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.hdf5.LevelGroup.chunks" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.hdf5.LevelGroup.clear_failed_dataset">
<code class="sig-name descname"><span class="pre">clear_failed_dataset</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/hdf5.html#LevelGroup.clear_failed_dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.hdf5.LevelGroup.clear_failed_dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear failed_ids dataset
:return: None</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.hdf5.LevelGroup.collected">
<code class="sig-name descname"><span class="pre">collected</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">chunk_slice</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/hdf5.html#LevelGroup.collected"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.hdf5.LevelGroup.collected" title="Permalink to this definition">¶</a></dt>
<dd><p>Read collected data by chunks,
number of items in chunk is determined by LevelGroup.chunk_size (number of bytes)
:param chunk_slice: slice() object
:return: np.ndarray</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.hdf5.LevelGroup.collected_ids_dset">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">collected_ids_dset</span></code><a class="headerlink" href="#src.mlmc.tool.hdf5.LevelGroup.collected_ids_dset" title="Permalink to this definition">¶</a></dt>
<dd><p>Collected ids dataset
:return: Dataset name</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.hdf5.LevelGroup.collected_n_items">
<code class="sig-name descname"><span class="pre">collected_n_items</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/hdf5.html#LevelGroup.collected_n_items"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.hdf5.LevelGroup.collected_n_items" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of collected samples
:return: int</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.hdf5.LevelGroup.failed_dset">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">failed_dset</span></code><a class="headerlink" href="#src.mlmc.tool.hdf5.LevelGroup.failed_dset" title="Permalink to this definition">¶</a></dt>
<dd><p>Dataset of ids of failed samples
:return: Dataset name</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.hdf5.LevelGroup.get_failed_ids">
<code class="sig-name descname"><span class="pre">get_failed_ids</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/hdf5.html#LevelGroup.get_failed_ids"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.hdf5.LevelGroup.get_failed_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Failed samples ids
:return: list of failed sample ids</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.hdf5.LevelGroup.get_finished_ids">
<code class="sig-name descname"><span class="pre">get_finished_ids</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/hdf5.html#LevelGroup.get_finished_ids"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.hdf5.LevelGroup.get_finished_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Get collected and failed samples ids
:return: NumPy array</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.hdf5.LevelGroup.get_unfinished_ids">
<code class="sig-name descname"><span class="pre">get_unfinished_ids</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/hdf5.html#LevelGroup.get_unfinished_ids"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.hdf5.LevelGroup.get_unfinished_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Get unfinished sample ids as difference between scheduled ids and finished ids
:return: list</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.hdf5.LevelGroup.n_ops_estimate">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">n_ops_estimate</span></code><a class="headerlink" href="#src.mlmc.tool.hdf5.LevelGroup.n_ops_estimate" title="Permalink to this definition">¶</a></dt>
<dd><p>Get number of operations estimate
:return: float</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.hdf5.LevelGroup.scheduled">
<code class="sig-name descname"><span class="pre">scheduled</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/hdf5.html#LevelGroup.scheduled"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.hdf5.LevelGroup.scheduled" title="Permalink to this definition">¶</a></dt>
<dd><p>Read level dataset with scheduled samples
:return:</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.hdf5.LevelGroup.scheduled_dset">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">scheduled_dset</span></code><a class="headerlink" href="#src.mlmc.tool.hdf5.LevelGroup.scheduled_dset" title="Permalink to this definition">¶</a></dt>
<dd><p>Dataset with scheduled samples
:return: Dataset name</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-src.mlmc.tool.pbs_job">
<span id="src-mlmc-tool-pbs-job-module"></span><h2>src.mlmc.tool.pbs_job module<a class="headerlink" href="#module-src.mlmc.tool.pbs_job" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="src.mlmc.tool.pbs_job.PbsJob">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">src.mlmc.tool.pbs_job.</span></code><code class="sig-name descname"><span class="pre">PbsJob</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">jobs_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">job_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">level_sim_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/pbs_job.html#PbsJob"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.pbs_job.PbsJob" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py attribute">
<dt id="src.mlmc.tool.pbs_job.PbsJob.CLASS_FILE">
<code class="sig-name descname"><span class="pre">CLASS_FILE</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'pbs_process_serialized.txt'</span></em><a class="headerlink" href="#src.mlmc.tool.pbs_job.PbsJob.CLASS_FILE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="src.mlmc.tool.pbs_job.PbsJob.FAILED_RESULTS">
<code class="sig-name descname"><span class="pre">FAILED_RESULTS</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'{}_failed_results.yaml'</span></em><a class="headerlink" href="#src.mlmc.tool.pbs_job.PbsJob.FAILED_RESULTS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="src.mlmc.tool.pbs_job.PbsJob.PBS_ID">
<code class="sig-name descname"><span class="pre">PBS_ID</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'{}_'</span></em><a class="headerlink" href="#src.mlmc.tool.pbs_job.PbsJob.PBS_ID" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="src.mlmc.tool.pbs_job.PbsJob.PERMANENT_SAMPLE">
<code class="sig-name descname"><span class="pre">PERMANENT_SAMPLE</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'permanent_jobID_{}'</span></em><a class="headerlink" href="#src.mlmc.tool.pbs_job.PbsJob.PERMANENT_SAMPLE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="src.mlmc.tool.pbs_job.PbsJob.SCHEDULED">
<code class="sig-name descname"><span class="pre">SCHEDULED</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'{}_scheduled.yaml'</span></em><a class="headerlink" href="#src.mlmc.tool.pbs_job.PbsJob.SCHEDULED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="src.mlmc.tool.pbs_job.PbsJob.SUCCESSFUL_RESULTS">
<code class="sig-name descname"><span class="pre">SUCCESSFUL_RESULTS</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'{}_successful_results.yaml'</span></em><a class="headerlink" href="#src.mlmc.tool.pbs_job.PbsJob.SUCCESSFUL_RESULTS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="src.mlmc.tool.pbs_job.PbsJob.TIME">
<code class="sig-name descname"><span class="pre">TIME</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'{}_times.yaml'</span></em><a class="headerlink" href="#src.mlmc.tool.pbs_job.PbsJob.TIME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.pbs_job.PbsJob.calculate_samples">
<code class="sig-name descname"><span class="pre">calculate_samples</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/pbs_job.html#PbsJob.calculate_samples"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.pbs_job.PbsJob.calculate_samples" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate scheduled samples
:return:</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.pbs_job.PbsJob.command_params">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">command_params</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/pbs_job.html#PbsJob.command_params"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.pbs_job.PbsJob.command_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Read command parameters - job identifier and file with necessary files
:return: None</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.pbs_job.PbsJob.create_job">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">create_job</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">jobs_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">job_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">level_sim_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/pbs_job.html#PbsJob.create_job"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.pbs_job.PbsJob.create_job" title="Permalink to this definition">¶</a></dt>
<dd><p>Create PbsProcess instance from SamplingPoolPBS
:param output_dir: str
:param jobs_dir: str
:param job_id: str
:param level_sim_file: str, file name format of LevelSimulation serialization
:param debug: bool, if True keep sample directories
:return: PbsProcess instance</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.pbs_job.PbsJob.create_process">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">create_process</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/pbs_job.html#PbsJob.create_process"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.pbs_job.PbsJob.create_process" title="Permalink to this definition">¶</a></dt>
<dd><p>Create PbsProcess via PBS
:return:</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.pbs_job.PbsJob.get_job_n_running">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">get_job_n_running</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">job_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">jobs_dir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/pbs_job.html#PbsJob.get_job_n_running"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.pbs_job.PbsJob.get_job_n_running" title="Permalink to this definition">¶</a></dt>
<dd><p>Get number of running (scheduled) samples for given unfinished jobs
:param job_id: str
:param jobs_dir: str, path to jobs directory
:return: int</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.pbs_job.PbsJob.get_scheduled_sample_ids">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">get_scheduled_sample_ids</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">job_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">jobs_dir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/pbs_job.html#PbsJob.get_scheduled_sample_ids"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.pbs_job.PbsJob.get_scheduled_sample_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Get scheduled samples
:param job_id: str
:param jobs_dir: str
:return:</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.pbs_job.PbsJob.read_results">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">read_results</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">job_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">jobs_dir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/pbs_job.html#PbsJob.read_results"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.pbs_job.PbsJob.read_results" title="Permalink to this definition">¶</a></dt>
<dd><p>Read result file for given job id
:param job_id: str
:param jobs_dir: path to jobs directory
:return: successful: Dict[level_id, List[Tuple[sample_id:str, Tuple[ndarray, ndarray]]]]</p>
<blockquote>
<div><p>failed: Dict[level_id, List[Tuple[sample_id: str, error message: str]]]
time: Dict[level_id: int, List[total time: float, number of success samples: int]]</p>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.pbs_job.PbsJob.save_scheduled">
<code class="sig-name descname"><span class="pre">save_scheduled</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scheduled</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/pbs_job.html#PbsJob.save_scheduled"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.pbs_job.PbsJob.save_scheduled" title="Permalink to this definition">¶</a></dt>
<dd><p>Save scheduled samples to yaml file
format: List[Tuple[level_id, sample_id]]
:return: None</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.pbs_job.PbsJob.write_pbs_id">
<code class="sig-name descname"><span class="pre">write_pbs_id</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pbs_job_id</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/pbs_job.html#PbsJob.write_pbs_id"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.pbs_job.PbsJob.write_pbs_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Create empty file name contains pbs jobID and our jobID
:param pbs_job_id: str
:return: None</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-src.mlmc.tool.process_base">
<span id="src-mlmc-tool-process-base-module"></span><h2>src.mlmc.tool.process_base module<a class="headerlink" href="#module-src.mlmc.tool.process_base" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="src.mlmc.tool.process_base.ProcessBase">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">src.mlmc.tool.process_base.</span></code><code class="sig-name descname"><span class="pre">ProcessBase</span></code><a class="reference internal" href="_modules/src/mlmc/tool/process_base.html#ProcessBase"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.process_base.ProcessBase" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Parent class for particular simulation processes</p>
<dl class="py method">
<dt id="src.mlmc.tool.process_base.ProcessBase.all_collect">
<code class="sig-name descname"><span class="pre">all_collect</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sampler_list</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/process_base.html#ProcessBase.all_collect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.process_base.ProcessBase.all_collect" title="Permalink to this definition">¶</a></dt>
<dd><p>Collect samples
:param mlmc_list: List of mlmc.MLMC objects
:return: None</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.process_base.ProcessBase.analyze_error_of_level_variances">
<code class="sig-name descname"><span class="pre">analyze_error_of_level_variances</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cl</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mlmc_level</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/process_base.html#ProcessBase.analyze_error_of_level_variances"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.process_base.ProcessBase.analyze_error_of_level_variances" title="Permalink to this definition">¶</a></dt>
<dd><p>Analyze error of level variances
:param cl: mlmc.estimate.CompareLevels instance
:param mlmc_level: selected MC method
:return: None</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.process_base.ProcessBase.analyze_error_of_log_variance">
<code class="sig-name descname"><span class="pre">analyze_error_of_log_variance</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cl</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mlmc_level</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/process_base.html#ProcessBase.analyze_error_of_log_variance"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.process_base.ProcessBase.analyze_error_of_log_variance" title="Permalink to this definition">¶</a></dt>
<dd><p>Analyze error of level variances
:param cl: mlmc.estimate.CompareLevels instance
:param mlmc_level: selected MC method
:return: None</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.process_base.ProcessBase.analyze_error_of_regression_level_variances">
<code class="sig-name descname"><span class="pre">analyze_error_of_regression_level_variances</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cl</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mlmc_level</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/process_base.html#ProcessBase.analyze_error_of_regression_level_variances"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.process_base.ProcessBase.analyze_error_of_regression_level_variances" title="Permalink to this definition">¶</a></dt>
<dd><p>Analyze error of level variances
:param cl: mlmc.estimate.CompareLevels instance
:param mlmc_level: selected MC method
:return: None</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.process_base.ProcessBase.analyze_error_of_regression_variance">
<code class="sig-name descname"><span class="pre">analyze_error_of_regression_variance</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cl</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mlmc_level</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/process_base.html#ProcessBase.analyze_error_of_regression_variance"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.process_base.ProcessBase.analyze_error_of_regression_variance" title="Permalink to this definition">¶</a></dt>
<dd><p>Analyze error of regression variance
:param cl: CompareLevels
:param mlmc_level: selected MC method
:return:</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.process_base.ProcessBase.analyze_error_of_variance">
<code class="sig-name descname"><span class="pre">analyze_error_of_variance</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cl</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mlmc_level</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/process_base.html#ProcessBase.analyze_error_of_variance"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.process_base.ProcessBase.analyze_error_of_variance" title="Permalink to this definition">¶</a></dt>
<dd><p>Analyze error of variance for particular mlmc method or for all collected methods
:param cl: mlmc.estimate.CompareLevels instance
:param mlmc_level: selected MC method
:return: None</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.process_base.ProcessBase.analyze_pdf_approx">
<code class="sig-name descname"><span class="pre">analyze_pdf_approx</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cl</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/process_base.html#ProcessBase.analyze_pdf_approx"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.process_base.ProcessBase.analyze_pdf_approx" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot densities
:param cl: mlmc.estimate.CompareLevels
:return: None</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.process_base.ProcessBase.analyze_regression_of_variance">
<code class="sig-name descname"><span class="pre">analyze_regression_of_variance</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cl</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mlmc_level</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/process_base.html#ProcessBase.analyze_regression_of_variance"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.process_base.ProcessBase.analyze_regression_of_variance" title="Permalink to this definition">¶</a></dt>
<dd><p>Analyze regression of variance
:param cl: mlmc.estimate.CompareLevels instance
:param mlmc_level: selected MC method
:return: None</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.process_base.ProcessBase.create_pbs_object">
<code class="sig-name descname"><span class="pre">create_pbs_object</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clean</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/process_base.html#ProcessBase.create_pbs_object"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.process_base.ProcessBase.create_pbs_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize object for PBS execution
:param output_dir: Output directory
:param clean: bool, if True remove existing files
:return: None</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.process_base.ProcessBase.generate_jobs">
<code class="sig-name descname"><span class="pre">generate_jobs</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mlmc</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_samples</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/process_base.html#ProcessBase.generate_jobs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.process_base.ProcessBase.generate_jobs" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate level samples
:param n_samples: None or list, number of samples for each level
:return: None</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.process_base.ProcessBase.get_arguments">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">get_arguments</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arguments</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/process_base.html#ProcessBase.get_arguments"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.process_base.ProcessBase.get_arguments" title="Permalink to this definition">¶</a></dt>
<dd><p>Getting arguments from console
:param arguments: list of arguments
:return: namespace</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.process_base.ProcessBase.n_sample_estimate">
<code class="sig-name descname"><span class="pre">n_sample_estimate</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mlmc</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_variance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.001</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/process_base.html#ProcessBase.n_sample_estimate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.process_base.ProcessBase.n_sample_estimate" title="Permalink to this definition">¶</a></dt>
<dd><p>Estimate number of level samples considering target variance
:param mlmc: MLMC object
:param target_variance: float, target variance of moments
:return: None</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.process_base.ProcessBase.process_analysis">
<code class="sig-name descname"><span class="pre">process_analysis</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cl</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/process_base.html#ProcessBase.process_analysis"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.process_base.ProcessBase.process_analysis" title="Permalink to this definition">¶</a></dt>
<dd><p>Main analysis function. Particular types of analysis called from here.
:param cl: Instance of CompareLevels - list of Estimate objects
:return:</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.process_base.ProcessBase.rm_files">
<code class="sig-name descname"><span class="pre">rm_files</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output_dir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/process_base.html#ProcessBase.rm_files"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.process_base.ProcessBase.rm_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Rm files and dirs
:param output_dir: Output directory path
:return:</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.process_base.ProcessBase.run">
<code class="sig-name descname"><span class="pre">run</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">renew</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/process_base.html#ProcessBase.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.process_base.ProcessBase.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run mlmc
:return: None</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.process_base.ProcessBase.set_environment_variables">
<code class="sig-name descname"><span class="pre">set_environment_variables</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/process_base.html#ProcessBase.set_environment_variables"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.process_base.ProcessBase.set_environment_variables" title="Permalink to this definition">¶</a></dt>
<dd><p>Set pbs config, flow123d, gmsh
:return: None</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.process_base.ProcessBase.set_moments">
<code class="sig-name descname"><span class="pre">set_moments</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n_moments</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/process_base.html#ProcessBase.set_moments"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.process_base.ProcessBase.set_moments" title="Permalink to this definition">¶</a></dt>
<dd><p>Create moments function instance
:param n_moments: int, number of moments
:param log: bool, If true then apply log transform
:return:</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.process_base.ProcessBase.setup_config">
<code class="sig-name descname"><span class="pre">setup_config</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n_levels</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clean</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/process_base.html#ProcessBase.setup_config"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.process_base.ProcessBase.setup_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Set simulation configuration depends on particular task
:param n_levels: Number of levels
:param clean: bool, if False use existing files
:return: mlmc.MLMC</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-src.mlmc.tool.simple_distribution">
<span id="src-mlmc-tool-simple-distribution-module"></span><h2>src.mlmc.tool.simple_distribution module<a class="headerlink" href="#module-src.mlmc.tool.simple_distribution" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="src.mlmc.tool.simple_distribution.KL_divergence">
<code class="sig-prename descclassname"><span class="pre">src.mlmc.tool.simple_distribution.</span></code><code class="sig-name descname"><span class="pre">KL_divergence</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prior_density</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">posterior_density</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/simple_distribution.html#KL_divergence"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.simple_distribution.KL_divergence" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute D_KL(P | Q) = int_R P(x) log( P(X)/Q(x)) dx
:param prior_density: P
:param posterior_density: Q
:return: KL divergence value</p>
</dd></dl>

<dl class="py function">
<dt id="src.mlmc.tool.simple_distribution.L2_distance">
<code class="sig-prename descclassname"><span class="pre">src.mlmc.tool.simple_distribution.</span></code><code class="sig-name descname"><span class="pre">L2_distance</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prior_density</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">posterior_density</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/simple_distribution.html#L2_distance"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.simple_distribution.L2_distance" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="src.mlmc.tool.simple_distribution.SimpleDistribution">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">src.mlmc.tool.simple_distribution.</span></code><code class="sig-name descname"><span class="pre">SimpleDistribution</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">moments_obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">moment_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">domain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_decay</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(True,</span> <span class="pre">True)</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/simple_distribution.html#SimpleDistribution"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.simple_distribution.SimpleDistribution" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Calculation of the distribution</p>
<dl class="py method">
<dt id="src.mlmc.tool.simple_distribution.SimpleDistribution.cdf">
<code class="sig-name descname"><span class="pre">cdf</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">values</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/simple_distribution.html#SimpleDistribution.cdf"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.simple_distribution.SimpleDistribution.cdf" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.simple_distribution.SimpleDistribution.density">
<code class="sig-name descname"><span class="pre">density</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/simple_distribution.html#SimpleDistribution.density"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.simple_distribution.SimpleDistribution.density" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>value</strong> – float or np.array</p></li>
<li><p><strong>moments_fn</strong> – counting moments function</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>density for passed value</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.simple_distribution.SimpleDistribution.end_point_derivatives">
<code class="sig-name descname"><span class="pre">end_point_derivatives</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/simple_distribution.html#SimpleDistribution.end_point_derivatives"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.simple_distribution.SimpleDistribution.end_point_derivatives" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute approximation of moment derivatives at endpoints of the domain.
:return: array (2, n_moments)</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.simple_distribution.SimpleDistribution.estimate_density_minimize">
<code class="sig-name descname"><span class="pre">estimate_density_minimize</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-05</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reg_param</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.01</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/simple_distribution.html#SimpleDistribution.estimate_density_minimize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.simple_distribution.SimpleDistribution.estimate_density_minimize" title="Permalink to this definition">¶</a></dt>
<dd><p>Optimize density estimation
:param tol: Tolerance for the nonlinear system residual, after division by std errors for
individual moment means, i.e.
res = || (F_i - mu_i) / sigma_i ||_2
:return: None</p>
</dd></dl>

<dl class="py method">
<dt id="src.mlmc.tool.simple_distribution.SimpleDistribution.eval_moments">
<code class="sig-name descname"><span class="pre">eval_moments</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/simple_distribution.html#SimpleDistribution.eval_moments"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.simple_distribution.SimpleDistribution.eval_moments" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt id="src.mlmc.tool.simple_distribution.best_fit_all">
<code class="sig-prename descclassname"><span class="pre">src.mlmc.tool.simple_distribution.</span></code><code class="sig-name descname"><span class="pre">best_fit_all</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">range_a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">range_b</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/simple_distribution.html#best_fit_all"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.simple_distribution.best_fit_all" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="src.mlmc.tool.simple_distribution.best_p1_fit">
<code class="sig-prename descclassname"><span class="pre">src.mlmc.tool.simple_distribution.</span></code><code class="sig-name descname"><span class="pre">best_p1_fit</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">values</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/simple_distribution.html#best_p1_fit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.simple_distribution.best_p1_fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Find indices a &lt; b such that linear fit for values[a:b]
have smallest residual / (b - a)** alpha
alpha is fixed parameter.
This should find longest fit with reasonably small residual.
:return: (a, b)</p>
</dd></dl>

<dl class="py function">
<dt id="src.mlmc.tool.simple_distribution.compute_exact_cov">
<code class="sig-prename descclassname"><span class="pre">src.mlmc.tool.simple_distribution.</span></code><code class="sig-name descname"><span class="pre">compute_exact_cov</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">moments_fn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">density</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-10</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/simple_distribution.html#compute_exact_cov"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.simple_distribution.compute_exact_cov" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute approximation of covariance matrix using exact density.
:param moments_fn: Moments function.
:param density: Density function (must accept np vectors).
:param tol: Tolerance of integration.
:return: np.array, moment values</p>
</dd></dl>

<dl class="py function">
<dt id="src.mlmc.tool.simple_distribution.compute_exact_moments">
<code class="sig-prename descclassname"><span class="pre">src.mlmc.tool.simple_distribution.</span></code><code class="sig-name descname"><span class="pre">compute_exact_moments</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">moments_fn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">density</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-10</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/simple_distribution.html#compute_exact_moments"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.simple_distribution.compute_exact_moments" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute approximation of moments using exact density.
:param moments_fn: Moments function.
:param density: Density function (must accept np vectors).
:param tol: Tolerance of integration.
:return: np.array, moment values</p>
</dd></dl>

<dl class="py function">
<dt id="src.mlmc.tool.simple_distribution.compute_semiexact_cov">
<code class="sig-prename descclassname"><span class="pre">src.mlmc.tool.simple_distribution.</span></code><code class="sig-name descname"><span class="pre">compute_semiexact_cov</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">moments_fn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">density</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-10</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/simple_distribution.html#compute_semiexact_cov"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.simple_distribution.compute_semiexact_cov" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute approximation of covariance matrix using exact density.
:param moments_fn: Moments function.
:param density: Density function (must accept np vectors).
:param tol: Tolerance of integration.
:return: np.array, moment values</p>
</dd></dl>

<dl class="py function">
<dt id="src.mlmc.tool.simple_distribution.compute_semiexact_moments">
<code class="sig-prename descclassname"><span class="pre">src.mlmc.tool.simple_distribution.</span></code><code class="sig-name descname"><span class="pre">compute_semiexact_moments</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">moments_fn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">density</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-10</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/simple_distribution.html#compute_semiexact_moments"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.simple_distribution.compute_semiexact_moments" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="src.mlmc.tool.simple_distribution.construct_ortogonal_moments">
<code class="sig-prename descclassname"><span class="pre">src.mlmc.tool.simple_distribution.</span></code><code class="sig-name descname"><span class="pre">construct_ortogonal_moments</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">moments</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cov</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/simple_distribution.html#construct_ortogonal_moments"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.simple_distribution.construct_ortogonal_moments" title="Permalink to this definition">¶</a></dt>
<dd><p>For given moments find the basis orthogonal with respect to the covariance matrix, estimated from samples.
:param moments: moments object
:return: orthogonal moments object of the same size.</p>
</dd></dl>

<dl class="py function">
<dt id="src.mlmc.tool.simple_distribution.detect_treshold_slope_change">
<code class="sig-prename descclassname"><span class="pre">src.mlmc.tool.simple_distribution.</span></code><code class="sig-name descname"><span class="pre">detect_treshold_slope_change</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/simple_distribution.html#detect_treshold_slope_change"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.simple_distribution.detect_treshold_slope_change" title="Permalink to this definition">¶</a></dt>
<dd><p>Find a longest subsequence with linear fit residual X% higher then the best
at least 4 point fit. Extrapolate this fit to the left.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>values</strong> – Increassing sequence.</p></li>
<li><p><strong>log</strong> – Use logarithm of the sequence.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Index K for which K: should have same slope.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="src.mlmc.tool.simple_distribution.lsq_reconstruct">
<code class="sig-prename descclassname"><span class="pre">src.mlmc.tool.simple_distribution.</span></code><code class="sig-name descname"><span class="pre">lsq_reconstruct</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cov</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eval</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">evec</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">treshold</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/simple_distribution.html#lsq_reconstruct"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.simple_distribution.lsq_reconstruct" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-src.mlmc.tool.stats_tests">
<span id="src-mlmc-tool-stats-tests-module"></span><h2>src.mlmc.tool.stats_tests module<a class="headerlink" href="#module-src.mlmc.tool.stats_tests" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="src.mlmc.tool.stats_tests.anova">
<code class="sig-prename descclassname"><span class="pre">src.mlmc.tool.stats_tests.</span></code><code class="sig-name descname"><span class="pre">anova</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">level_moments</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/stats_tests.html#anova"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.stats_tests.anova" title="Permalink to this definition">¶</a></dt>
<dd><p>Analysis of variance
:param level_moments: moments values per level
:return: bool</p>
</dd></dl>

<dl class="py function">
<dt id="src.mlmc.tool.stats_tests.chi2_test">
<code class="sig-prename descclassname"><span class="pre">src.mlmc.tool.stats_tests.</span></code><code class="sig-name descname"><span class="pre">chi2_test</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">var_0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">samples</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_p_val</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.01</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/stats_tests.html#chi2_test"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.stats_tests.chi2_test" title="Permalink to this definition">¶</a></dt>
<dd><p>Test that variance of samples is sigma_0, false
failures with probability max_p_val.
:param sigma_0: Exact mean.
:param samples: Samples to test.
:param max_p_val: Probability of failed t-test for correct samples.</p>
</dd></dl>

<dl class="py function">
<dt id="src.mlmc.tool.stats_tests.t_test">
<code class="sig-prename descclassname"><span class="pre">src.mlmc.tool.stats_tests.</span></code><code class="sig-name descname"><span class="pre">t_test</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mu_0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">samples</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_p_val</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.01</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/mlmc/tool/stats_tests.html#t_test"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.mlmc.tool.stats_tests.t_test" title="Permalink to this definition">¶</a></dt>
<dd><p>Test that mean of samples is mu_0, false
failures with probability max_p_val.</p>
<p>Perform the two-tailed t-test and
Assert that p-val is smaller then given value.
:param mu_0: Exact mean.
:param samples: Samples to test.
:param max_p_val: Probability of failed t-test for correct samples.</p>
</dd></dl>

</div>
<div class="section" id="module-src.mlmc.tool">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-src.mlmc.tool" title="Permalink to this headline">¶</a></h2>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">MLMC</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="src.mlmc.quantity.html">src.mlmc.quantity package</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="src.mlmc.html">src.mlmc package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="src.mlmc.html#subpackages">Subpackages</a></li>
<li class="toctree-l2"><a class="reference internal" href="src.mlmc.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="src.mlmc.html#module-src.mlmc.estimator">src.mlmc.estimator module</a></li>
<li class="toctree-l2"><a class="reference internal" href="src.mlmc.html#module-src.mlmc.level_simulation">src.mlmc.level_simulation module</a></li>
<li class="toctree-l2"><a class="reference internal" href="src.mlmc.html#module-src.mlmc.moments">src.mlmc.moments module</a></li>
<li class="toctree-l2"><a class="reference internal" href="src.mlmc.html#module-src.mlmc.sample_storage">src.mlmc.sample_storage module</a></li>
<li class="toctree-l2"><a class="reference internal" href="src.mlmc.html#module-src.mlmc.sample_storage_hdf">src.mlmc.sample_storage_hdf module</a></li>
<li class="toctree-l2"><a class="reference internal" href="src.mlmc.html#module-src.mlmc.sampler">src.mlmc.sampler module</a></li>
<li class="toctree-l2"><a class="reference internal" href="src.mlmc.html#module-src.mlmc.sampling_pool">src.mlmc.sampling_pool module</a></li>
<li class="toctree-l2"><a class="reference internal" href="src.mlmc.html#module-src.mlmc.sampling_pool_pbs">src.mlmc.sampling_pool_pbs module</a></li>
<li class="toctree-l2"><a class="reference internal" href="src.mlmc.html#module-src.mlmc">Module contents</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="src.mlmc.html">src.mlmc package</a><ul>
      <li>Previous: <a href="src.mlmc.sim.html" title="previous chapter">src.mlmc.sim package</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, Jan Brezina, Martin Spetlik.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.5.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/src.mlmc.tool.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>